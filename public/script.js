"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var DynamicAdaptive=function(){function e(){_classCallCheck(this,e),this.adaptiveElems=document.querySelectorAll("[data-adaptive]"),this.bundleMap=new Map,this.onSetAdaptive=this.onSetAdaptive.bind(this);var t,r=_createForOfIteratorHelper(this.adaptiveElems);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.bundleMap.set(n,{parent:n.parentNode,index:this.getIndexOfChild(n)})}}catch(e){r.e(e)}finally{r.f()}window.addEventListener("resize",this.onSetAdaptive)}return _createClass(e,[{key:"onSetAdaptive",value:function(){var e,t=document.documentElement.clientWidth,r=_createForOfIteratorHelper(this.adaptiveElems);try{for(r.s();!(e=r.n()).done;){var n=e.value,a=this.getInitStateOfElem(n),i=a.parent,o=a.index,l=_slicedToArray(n.dataset.adaptive.split(" "),2),s=l[0],u=l[1],c=document.querySelector(u);if(s=parseInt(s),!c)return;t<=s?c.append(n):o-1<0?i.prepend(n):i.children[o-1].after(n)}}catch(e){r.e(e)}finally{r.f()}}},{key:"getIndexOfChild",value:function(e){return Array.from(e.parentNode.children).indexOf(e)}},{key:"getInitStateOfElem",value:function(e){return this.bundleMap.get(e)}},{key:"init",value:function(){this.onSetAdaptive()}}]),e}();(new DynamicAdaptive).init();var burgerEl=document.querySelector(".js-burger"),menuEl=document.querySelector(".js-menu");function onToggleMenuBtnClick(){if("true"===this.getAttribute("aria-expanded"))return menuEl.classList.remove("show"),this.classList.remove("active"),this.setAttribute("aria-label","открыть меню"),void this.setAttribute("aria-expanded","false");menuEl.classList.add("show"),this.classList.add("active"),this.setAttribute("aria-label","закрыть меню"),this.setAttribute("aria-expanded","true")}burgerEl.addEventListener("click",onToggleMenuBtnClick);var feedbackLinkEl=document.querySelector(".js-feedback-link"),feedbackFormEl=document.querySelector(".js-feedback-form"),formCloseEl=document.querySelector(".js-form-close"),feedbackInputEl=document.querySelector(".js-feedback-input"),submitPopupEl=document.querySelector(".js-submit-popup"),popupTextEl=document.querySelector(".js-popup-text"),popupCloseEl=document.querySelector(".js-popup-close"),validation=new JustValidate(".js-feedback-form"),maskOptions={mask:"+{7}(000)000-00-00"},isFormValid=!1;function onToggleFeedbackFormLinkClick(e){if(e.preventDefault(),"true"===feedbackLinkEl.getAttribute("aria-expanded"))return feedbackFormEl.classList.remove("show"),void feedbackLinkEl.setAttribute("aria-expanded","false");feedbackFormEl.classList.add("show"),feedbackLinkEl.setAttribute("aria-expanded","true")}function onCloseFeebackFormClick(e){(!e.target.classList.contains("js-feedback-link")&&!e.target.closest(".js-feedback-form")||e.target.closest(".js-form-close"))&&(feedbackFormEl.classList.remove("show"),feedbackLinkEl.setAttribute("aria-expanded","false"))}IMask(feedbackInputEl,maskOptions),validation.addField("#policy-confirm",[{rule:"required",errorMessage:"Это поле обязательно"}]).addField("#phone-number",[{rule:"required",errorMessage:"Пожалуйста, введите номер телефона"}]).onFail((function(){return isFormValid=!1})).onSuccess((function(){return isFormValid=!0})),feedbackLinkEl.addEventListener("click",onToggleFeedbackFormLinkClick),window.addEventListener("click",onCloseFeebackFormClick),feedbackFormEl.addEventListener("submit",(function(e){if(e.preventDefault(),isFormValid){feedbackFormEl.classList.remove("show"),feedbackLinkEl.setAttribute("aria-expanded","false"),popupTextEl.textContent="Спасибо! Ваша заявка отправлена",submitPopupEl.classList.add("show","success");var t=setTimeout((function(){return submitPopupEl.classList.remove("show")}),2e3);popupCloseEl.addEventListener("click",(function(){clearTimeout(t),submitPopupEl.classList.remove("show")})),feedbackFormEl.reset()}}));var bulletsBtnEl=document.querySelector(".js-bullets-btn"),bulletsEl=document.querySelector("#bullets");function onToggleBulletsBtnClick(){if("true"===this.getAttribute("aria-expanded"))return bulletsEl.classList.remove("show"),this.classList.remove("active"),this.setAttribute("aria-label","показать преимущества"),void this.setAttribute("aria-expanded","false");bulletsEl.classList.add("show"),this.classList.add("active"),this.setAttribute("aria-label","скрыть преимущества"),this.setAttribute("aria-expanded","true")}bulletsBtnEl.addEventListener("click",onToggleBulletsBtnClick);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkR5bmFtaWNBZGFwdGl2ZS5qcyIsImJ1cmdlci5qcyIsImZlZWRiYWNrRm9ybS5qcyIsInNob3dCdWxsZXRzLmpzIl0sIm5hbWVzIjpbIkR5bmFtaWNBZGFwdGl2ZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJhZGFwdGl2ZUVsZW1zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnVuZGxlTWFwIiwiTWFwIiwib25TZXRBZGFwdGl2ZSIsImJpbmQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJkb25lIiwiZWxlbSIsInZhbHVlIiwic2V0IiwicGFyZW50IiwicGFyZW50Tm9kZSIsImluZGV4IiwiZ2V0SW5kZXhPZkNoaWxkIiwiZXJyIiwiZSIsImYiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiX3N0ZXAyIiwid2luZG93V2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsIl9pdGVyYXRvcjIiLCJfdGhpcyRnZXRJbml0U3RhdGVPZkUiLCJnZXRJbml0U3RhdGVPZkVsZW0iLCJpbml0UGFyZW50Tm9kZSIsImluaXRJbmRleCIsIl9lbGVtJGRhdGFzZXQkYWRhcHRpdjIiLCJfc2xpY2VkVG9BcnJheSIsImRhdGFzZXQiLCJhZGFwdGl2ZSIsInNwbGl0Iiwid2lkdGgiLCJ0YXJnZXROb2RlU2VsZWN0b3IiLCJ0YXJnZXRQYXJlbnQiLCJxdWVyeVNlbGVjdG9yIiwicGFyc2VJbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY2hpbGRyZW4iLCJhZnRlciIsIkFycmF5IiwiZnJvbSIsImluZGV4T2YiLCJnZXQiLCJpbml0IiwiYnVyZ2VyRWwiLCJtZW51RWwiLCJvblRvZ2dsZU1lbnVCdG5DbGljayIsImdldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNldEF0dHJpYnV0ZSIsImFkZCIsImZlZWRiYWNrTGlua0VsIiwiZmVlZGJhY2tGb3JtRWwiLCJmb3JtQ2xvc2VFbCIsImZlZWRiYWNrSW5wdXRFbCIsInN1Ym1pdFBvcHVwRWwiLCJwb3B1cFRleHRFbCIsInBvcHVwQ2xvc2VFbCIsInZhbGlkYXRpb24iLCJKdXN0VmFsaWRhdGUiLCJtYXNrT3B0aW9ucyIsIm1hc2siLCJpc0Zvcm1WYWxpZCIsIm9uVG9nZ2xlRmVlZGJhY2tGb3JtTGlua0NsaWNrIiwiZXYiLCJwcmV2ZW50RGVmYXVsdCIsIm9uQ2xvc2VGZWViYWNrRm9ybUNsaWNrIiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZXN0IiwiSU1hc2siLCJhZGRGaWVsZCIsInJ1bGUiLCJlcnJvck1lc3NhZ2UiLCJvbkZhaWwiLCJvblN1Y2Nlc3MiLCJ0ZXh0Q29udGVudCIsInRpbWVySUQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwicmVzZXQiLCJidWxsZXRzQnRuRWwiLCJidWxsZXRzRWwiLCJvblRvZ2dsZUJ1bGxldHNCdG5DbGljayJdLCJtYXBwaW5ncyI6IjR4RUFBTUEsZ0IsV0FDSixTQUFBQSxJQUFjQyxnQkFBQUMsS0FBQUYsR0FDWkUsS0FBS0MsY0FBZ0JDLFNBQVNDLGlCQUFpQixtQkFDL0NILEtBQUtJLFVBQVksSUFBSUMsSUFDckJMLEtBQUtNLGNBQWdCTixLQUFLTSxjQUFjQyxLQUFLUCxNQUhqQyxJQUFBUSxFQUFBQyxFQUFBQywyQkFLS1YsS0FBS0MsZUFMVixJQUtaLElBQUFRLEVBQUFFLE1BQUFILEVBQUFDLEVBQUFHLEtBQUFDLE1BQXFDLEtBQTVCQyxFQUE0Qk4sRUFBQU8sTUFDbkNmLEtBQUtJLFVBQVVZLElBQUlGLEVBQU0sQ0FBRUcsT0FBUUgsRUFBS0ksV0FBWUMsTUFBT25CLEtBQUtvQixnQkFBZ0JOLElBQ2pGLENBUFcsT0FBQU8sR0FBQVosRUFBQWEsRUFBQUQsRUFBQSxTQUFBWixFQUFBYyxHQUFBLENBU1pDLE9BQU9DLGlCQUFpQixTQUFVekIsS0FBS00sY0FDeEMsQyxrREFFRCxXQUNFLElBRGNvQixFQUNSQyxFQUFjekIsU0FBUzBCLGdCQUFn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QXBCLElBNEJiWCxlQUFlckMsaUJBQWlCLFFBQVNpRCwrQkFDekNsRCxPQUFPQyxpQkFBaUIsUUFBU29ELHlCQUVqQ2QsZUFBZXRDLGlCQUFpQixVQUFVLFNBQVVrRCxHQUVsRCxHQURBQSxFQUFHQyxpQkFDQ0gsWUFBSixDQUVBVixlQUFlTCxVQUFVQyxPQUFPLFFBQ2hDRyxlQUFlRixhQUFhLGdCQUFpQixTQWM3Q08sWUFBWW9CLFlBQWMsa0NBQzFCckIsY0FBY1IsVUFBVUcsSUFBSSxPQUFRLFdBQ3BDLElBQU0yQixFQUFVQyxZQUFXLGtCQUFNdkIsY0FBY1IsVUFBVUMsT0FBTyxPQUFyQyxHQUE4QyxLQUV6RVMsYUFBYTNDLGlCQUFpQixTQUFTLFdBQ3JDaUUsYUFBYUYsR0FDYnRCLGNBQWNSLFVBQVVDLE9BQU8sT0FDaEMsSUFFREksZUFBZTRCLE9BMUJFLENBMkJsQixJQ3hGRCxJQUFNQyxhQUFlMUYsU0FBU3lDLGNBQWMsbUJBQ3RDa0QsVUFBWTNGLFNBQVN5QyxjQUFjLFlBRXpDLFNBQVNtRCwwQkFHUCxHQUYwRCxTQUF2QzlGLEtBQUt5RCxhQUFhLGlCQU9uQyxPQUpBb0MsVUFBVW5DLFVBQVVDLE9BQU8sUUFDM0IzRCxLQUFLMEQsVUFBVUMsT0FBTyxVQUN0QjNELEtBQUs0RCxhQUFhLGFBQWMsOEJBQ2hDNUQsS0FBSzRELGFBQWEsZ0JBQWlCLFNBSXJDaUMsVUFBVW5DLFVBQVVHLElBQUksUUFDeEI3RCxLQUFLMEQsVUFBVUcsSUFBSSxVQUNuQjdELEtBQUs0RCxhQUFhLGFBQWMsdUJBQ2hDNUQsS0FBSzRELGFBQWEsZ0JBQWlCLE9BQ3BDLENBRURnQyxhQUFhbkUsaUJBQWlCLFFBQVNxRSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBEeW5hbWljQWRhcHRpdmUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmFkYXB0aXZlRWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1hZGFwdGl2ZV0nKTtcbiAgICB0aGlzLmJ1bmRsZU1hcCA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLm9uU2V0QWRhcHRpdmUgPSB0aGlzLm9uU2V0QWRhcHRpdmUuYmluZCh0aGlzKTtcblxuICAgIGZvciAobGV0IGVsZW0gb2YgdGhpcy5hZGFwdGl2ZUVsZW1zKSB7XG4gICAgICB0aGlzLmJ1bmRsZU1hcC5zZXQoZWxlbSwgeyBwYXJlbnQ6IGVsZW0ucGFyZW50Tm9kZSwgaW5kZXg6IHRoaXMuZ2V0SW5kZXhPZkNoaWxkKGVsZW0pIH0pO1xuICAgIH1cblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uU2V0QWRhcHRpdmUpO1xuICB9XG5cbiAgb25TZXRBZGFwdGl2ZSgpIHtcbiAgICBjb25zdCB3aW5kb3dXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcblxuICAgIGZvciAobGV0IGVsZW0gb2YgdGhpcy5hZGFwdGl2ZUVsZW1zKSB7XG4gICAgICBjb25zdCB7IHBhcmVudDogaW5pdFBhcmVudE5vZGUsIGluZGV4OiBpbml0SW5kZXggfSA9IHRoaXMuZ2V0SW5pdFN0YXRlT2ZFbGVtKGVsZW0pO1xuICAgICAgbGV0IFt3aWR0aCwgdGFyZ2V0Tm9kZVNlbGVjdG9yXSA9IGVsZW0uZGF0YXNldC5hZGFwdGl2ZS5zcGxpdCgnICcpO1xuICAgICAgY29uc3QgdGFyZ2V0UGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXROb2RlU2VsZWN0b3IpO1xuICAgICAgd2lkdGggPSBwYXJzZUludCh3aWR0aCk7XG5cbiAgICAgIGlmICghdGFyZ2V0UGFyZW50KSByZXR1cm47XG5cbiAgICAgIGlmICh3aW5kb3dXaWR0aCA8PSB3aWR0aCkge1xuICAgICAgICB0YXJnZXRQYXJlbnQuYXBwZW5kKGVsZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGluaXRJbmRleCAtIDEpIDwgMCA/XG4gICAgICAgIGluaXRQYXJlbnROb2RlLnByZXBlbmQoZWxlbSkgOlxuICAgICAgICBpbml0UGFyZW50Tm9kZS5jaGlsZHJlbltpbml0SW5kZXggLSAxXS5hZnRlcihlbGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRJbmRleE9mQ2hpbGQoZWxlbSkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbShlbGVtLnBhcmVudE5vZGUuY2hpbGRyZW4pO1xuICAgIHJldHVybiBjaGlsZHJlbi5pbmRleE9mKGVsZW0pO1xuICB9XG5cbiAgZ2V0SW5pdFN0YXRlT2ZFbGVtKGVsZW0pIHtcbiAgICByZXR1cm4gdGhpcy5idW5kbGVNYXAuZ2V0KGVsZW0pO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLm9uU2V0QWRhcHRpdmUoKTtcbiAgfVxufVxuXG5uZXcgRHluYW1pY0FkYXB0aXZlKCkuaW5pdCgpO1xuIiwiY29uc3QgYnVyZ2VyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtYnVyZ2VyJyk7XG5jb25zdCBtZW51RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbWVudScpO1xuXG5mdW5jdGlvbiBvblRvZ2dsZU1lbnVCdG5DbGljaygpIHtcbiAgY29uc3QgaXNFeHBhbmRlZCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcblxuICBpZiAoaXNFeHBhbmRlZCkge1xuICAgIG1lbnVFbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICfQvtGC0LrRgNGL0YLRjCDQvNC10L3RjicpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbWVudUVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAn0LfQsNC60YDRi9GC0Ywg0LzQtdC90Y4nKTtcbiAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xufVxuXG5idXJnZXJFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVG9nZ2xlTWVudUJ0bkNsaWNrKTtcbiIsImNvbnN0IGZlZWRiYWNrTGlua0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWZlZWRiYWNrLWxpbmsnKTtcbmNvbnN0IGZlZWRiYWNrRm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWZlZWRiYWNrLWZvcm0nKTtcbmNvbnN0IGZvcm1DbG9zZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWZvcm0tY2xvc2UnKTtcbmNvbnN0IGZlZWRiYWNrSW5wdXRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1mZWVkYmFjay1pbnB1dCcpO1xuY29uc3Qgc3VibWl0UG9wdXBFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zdWJtaXQtcG9wdXAnKTtcbmNvbnN0IHBvcHVwVGV4dEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXBvcHVwLXRleHQnKTtcbmNvbnN0IHBvcHVwQ2xvc2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3B1cC1jbG9zZScpO1xuY29uc3QgdmFsaWRhdGlvbiA9IG5ldyBKdXN0VmFsaWRhdGUoJy5qcy1mZWVkYmFjay1mb3JtJyk7XG5jb25zdCBtYXNrT3B0aW9ucyA9IHtcbiAgbWFzazogJyt7N30oMDAwKTAwMC0wMC0wMCdcbn07XG5sZXQgaXNGb3JtVmFsaWQgPSBmYWxzZTtcblxuSU1hc2soZmVlZGJhY2tJbnB1dEVsLCBtYXNrT3B0aW9ucyk7XG5cbnZhbGlkYXRpb24uYWRkRmllbGQoJyNwb2xpY3ktY29uZmlybScsIFtcbiAge1xuICAgIHJ1bGU6ICdyZXF1aXJlZCcsXG4gICAgZXJyb3JNZXNzYWdlOiAn0K3RgtC+INC/0L7Qu9C1INC+0LHRj9C30LDRgtC10LvRjNC90L4nLFxuICB9XG5dKVxuICAuYWRkRmllbGQoJyNwaG9uZS1udW1iZXInLCBbXG4gICAge1xuICAgICAgcnVsZTogJ3JlcXVpcmVkJyxcbiAgICAgIGVycm9yTWVzc2FnZTogJ9Cf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDQvdC+0LzQtdGAINGC0LXQu9C10YTQvtC90LAnLFxuICAgIH1cbiAgXSlcbiAgLm9uRmFpbCgoKSA9PiBpc0Zvcm1WYWxpZCA9IGZhbHNlKVxuICAub25TdWNjZXNzKCgpID0+IGlzRm9ybVZhbGlkID0gdHJ1ZSk7XG5cbmZ1bmN0aW9uIG9uVG9nZ2xlRmVlZGJhY2tGb3JtTGlua0NsaWNrKGV2KSB7XG4gIGV2LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgaXNFeHBhbmRlZCA9IGZlZWRiYWNrTGlua0VsLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG5cbiAgaWYgKGlzRXhwYW5kZWQpIHtcbiAgICBmZWVkYmFja0Zvcm1FbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgZmVlZGJhY2tMaW5rRWwuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZmVlZGJhY2tGb3JtRWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICBmZWVkYmFja0xpbmtFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xufVxuXG5mdW5jdGlvbiBvbkNsb3NlRmVlYmFja0Zvcm1DbGljayhldikge1xuICBpZiAoXG4gICAgIWV2LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLWZlZWRiYWNrLWxpbmsnKSAmJlxuICAgICFldi50YXJnZXQuY2xvc2VzdCgnLmpzLWZlZWRiYWNrLWZvcm0nKSB8fFxuICAgIGV2LnRhcmdldC5jbG9zZXN0KCcuanMtZm9ybS1jbG9zZScpXG4gICkge1xuICAgIGZlZWRiYWNrRm9ybUVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICBmZWVkYmFja0xpbmtFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgfVxufVxuXG5mZWVkYmFja0xpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVG9nZ2xlRmVlZGJhY2tGb3JtTGlua0NsaWNrKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xvc2VGZWViYWNrRm9ybUNsaWNrKTtcblxuZmVlZGJhY2tGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2KSB7XG4gIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gIGlmKCFpc0Zvcm1WYWxpZCkgcmV0dXJuO1xuXG4gIGZlZWRiYWNrRm9ybUVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgZmVlZGJhY2tMaW5rRWwuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG5cbiAgLypcbiAgICogdHJ5IHtcbiAgICogLy8g0L7RgtC/0YDQsNCy0LvRj9C10Lwg0LfQsNGP0LLQutGDXG4gICAqIH0gY2F0Y2goZXJyKSB7XG4gICAqIC8vINC+0LHRgNCw0LHQsNGC0YvQstCw0LXQvCDQvtGI0LjQsdC60YMsINGB0L7QvtCx0YnQsNC10Lwg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GOINC+0LEg0L7RiNC40LHQutC1XG4gICAqIHBvcHVwVGV4dEVsLnRleHRDb250ZW50ID0gJ9Cn0YLQvi3RgtC+INC/0L7RiNC70L4g0L3QtSDRgtCw0LouLi4nO1xuICAgKiBzdWJtaXRQb3B1cEVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnLCAnZGFuZ2VyJyk7XG4gICAqIHNldFRpbWVvdXQoKCkgPT4gc3VibWl0UG9wdXBFbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JyksIDIwMDApO1xuICAgKiByZXR1cm47XG4gICAqIH1cbiAgICovXG5cbiAgcG9wdXBUZXh0RWwudGV4dENvbnRlbnQgPSAn0KHQv9Cw0YHQuNCx0L4hINCS0LDRiNCwINC30LDRj9Cy0LrQsCDQvtGC0L/RgNCw0LLQu9C10L3QsCc7XG4gIHN1Ym1pdFBvcHVwRWwuY2xhc3NMaXN0LmFkZCgnc2hvdycsICdzdWNjZXNzJyk7XG4gIGNvbnN0IHRpbWVySUQgPSBzZXRUaW1lb3V0KCgpID0+IHN1Ym1pdFBvcHVwRWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpLCAyMDAwKTtcblxuICBwb3B1cENsb3NlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVySUQpO1xuICAgIHN1Ym1pdFBvcHVwRWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICB9KTtcblxuICBmZWVkYmFja0Zvcm1FbC5yZXNldCgpO1xufSk7XG4iLCJjb25zdCBidWxsZXRzQnRuRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtYnVsbGV0cy1idG4nKTtcbmNvbnN0IGJ1bGxldHNFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidWxsZXRzJyk7XG5cbmZ1bmN0aW9uIG9uVG9nZ2xlQnVsbGV0c0J0bkNsaWNrKCkge1xuICBjb25zdCBpc0V4cGFuZGVkID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuXG4gIGlmIChpc0V4cGFuZGVkKSB7XG4gICAgYnVsbGV0c0VsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ9C/0L7QutCw0LfQsNGC0Ywg0L/RgNC10LjQvNGD0YnQtdGB0YLQstCwJyk7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBidWxsZXRzRWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICfRgdC60YDRi9GC0Ywg0L/RgNC10LjQvNGD0YnQtdGB0YLQstCwJyk7XG4gIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbn1cblxuYnVsbGV0c0J0bkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Ub2dnbGVCdWxsZXRzQnRuQ2xpY2spO1xuIl19
